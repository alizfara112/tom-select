{"version":3,"file":"highlight.js","sources":["../../../src/contrib/highlight.js"],"sourcesContent":["/**\n * highlight v3 | MIT license | Johann Burkard <jb@eaio.com>\n * Highlights arbitrary terms in a node.\n *\n * - Modified by Marshal <beatgates@gmail.com> 2011-6-24 (added regex)\n * - Modified by Brian Reavis <brian@thirdroute.com> 2012-8-27 (cleanup)\n */\n\nexport function highlight(element, pattern) {\n\tif (typeof pattern === 'string' && !pattern.length) return;\n\tvar regex = (typeof pattern === 'string') ? new RegExp(pattern, 'i') : pattern;\n\n\tvar highlight = function(node) {\n\t\tvar skip = 0;\n\t\t// Wrap matching part of text node with highlighting <span>, e.g.\n\t\t// Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\n\t\tif (node.nodeType === 3) {\n\t\t\tvar pos = node.data.search(regex);\n\t\t\tif (pos >= 0 && node.data.length > 0) {\n\t\t\t\tvar match = node.data.match(regex);\n\t\t\t\tvar spannode = document.createElement('span');\n\t\t\t\tspannode.className = 'highlight';\n\t\t\t\tvar middlebit = node.splitText(pos);\n\t\t\t\tmiddlebit.splitText(match[0].length);\n\t\t\t\tvar middleclone = middlebit.cloneNode(true);\n\t\t\t\tspannode.appendChild(middleclone);\n\t\t\t\tmiddlebit.parentNode.replaceChild(spannode, middlebit);\n\t\t\t\tskip = 1;\n\n\t\t\t}\n\t\t}\n\t\t// Recurse element node, looking for child text nodes to highlight, unless element\n\t\t// is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n\t\telse if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && ( node.className !== 'highlight' || node.tagName !== 'SPAN' )) {\n\t\t\tfor (var i = 0; i < node.childNodes.length; ++i) {\n\t\t\t\ti += highlight(node.childNodes[i]);\n\t\t\t}\n\t\t}\n\t\treturn skip;\n\t};\n\n\thighlight( element );\n};\n\n/**\n * removeHighlight fn copied from highlight v5 and\n * edited to remove with(), pass js strict mode, and use without jquery\n */\nexport function removeHighlight(el) {\n\tvar elements = document.querySelectorAll(\"span.highlight\");\n\tArray.prototype.forEach.call(elements, function(el, i){\n\t\tvar parent = el.parentNode;\n\t\tparent.replaceChild(el.firstChild, el);\n\t\tparent.normalize();\n\t});\n};\n"],"names":["highlight","element","pattern","length","regex","RegExp","node","skip","nodeType","pos","data","search","match","spannode","document","createElement","className","middlebit","splitText","middleclone","cloneNode","appendChild","parentNode","replaceChild","childNodes","test","tagName","i","removeHighlight","el","elements","querySelectorAll","Array","prototype","forEach","call","parent","firstChild","normalize"],"mappings":";;;;;AAAA;;;;;;;AAQO,SAASA,SAAT,CAAmBC,OAAnB,EAA4BC,OAA5B,EAAqC;AAC3C,MAAI,OAAOA,OAAP,KAAmB,QAAnB,IAA+B,CAACA,OAAO,CAACC,MAA5C,EAAoD;AACpD,MAAIC,KAAK,GAAI,OAAOF,OAAP,KAAmB,QAApB,GAAgC,IAAIG,MAAJ,CAAWH,OAAX,EAAoB,GAApB,CAAhC,GAA2DA,OAAvE;;AAEA,MAAIF,SAAS,GAAG,SAAZA,SAAY,CAASM,IAAT,EAAe;AAC9B,QAAIC,IAAI,GAAG,CAAX,CAD8B;AAG9B;;AACA,QAAID,IAAI,CAACE,QAAL,KAAkB,CAAtB,EAAyB;AACxB,UAAIC,GAAG,GAAGH,IAAI,CAACI,IAAL,CAAUC,MAAV,CAAiBP,KAAjB,CAAV;;AACA,UAAIK,GAAG,IAAI,CAAP,IAAYH,IAAI,CAACI,IAAL,CAAUP,MAAV,GAAmB,CAAnC,EAAsC;AACrC,YAAIS,KAAK,GAAGN,IAAI,CAACI,IAAL,CAAUE,KAAV,CAAgBR,KAAhB,CAAZ;AACA,YAAIS,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAf;AACAF,QAAAA,QAAQ,CAACG,SAAT,GAAqB,WAArB;AACA,YAAIC,SAAS,GAAGX,IAAI,CAACY,SAAL,CAAeT,GAAf,CAAhB;AACAQ,QAAAA,SAAS,CAACC,SAAV,CAAoBN,KAAK,CAAC,CAAD,CAAL,CAAST,MAA7B;AACA,YAAIgB,WAAW,GAAGF,SAAS,CAACG,SAAV,CAAoB,IAApB,CAAlB;AACAP,QAAAA,QAAQ,CAACQ,WAAT,CAAqBF,WAArB;AACAF,QAAAA,SAAS,CAACK,UAAV,CAAqBC,YAArB,CAAkCV,QAAlC,EAA4CI,SAA5C;AACAV,QAAAA,IAAI,GAAG,CAAP;AAEA;AACD,KAdD;AAgBA;AAhBA,SAiBK,IAAID,IAAI,CAACE,QAAL,KAAkB,CAAlB,IAAuBF,IAAI,CAACkB,UAA5B,IAA0C,CAAC,kBAAkBC,IAAlB,CAAuBnB,IAAI,CAACoB,OAA5B,CAA3C,KAAqFpB,IAAI,CAACU,SAAL,KAAmB,WAAnB,IAAkCV,IAAI,CAACoB,OAAL,KAAiB,MAAxI,CAAJ,EAAsJ;AAC1J,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrB,IAAI,CAACkB,UAAL,CAAgBrB,MAApC,EAA4C,EAAEwB,CAA9C,EAAiD;AAChDA,UAAAA,CAAC,IAAI3B,SAAS,CAACM,IAAI,CAACkB,UAAL,CAAgBG,CAAhB,CAAD,CAAd;AACA;AACD;;AACD,WAAOpB,IAAP;AACA,GA3BD;;AA6BAP,EAAAA,SAAS,CAAEC,OAAF,CAAT;AACA;AAED;;;;;AAIO,SAAS2B,eAAT,CAAyBC,EAAzB,EAA6B;AACnC,MAAIC,QAAQ,GAAGhB,QAAQ,CAACiB,gBAAT,CAA0B,gBAA1B,CAAf;AACAC,EAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BL,QAA7B,EAAuC,UAASD,EAAT,EAAaF,CAAb,EAAe;AACrD,QAAIS,MAAM,GAAGP,EAAE,CAACP,UAAhB;AACAc,IAAAA,MAAM,CAACb,YAAP,CAAoBM,EAAE,CAACQ,UAAvB,EAAmCR,EAAnC;AACAO,IAAAA,MAAM,CAACE,SAAP;AACA,GAJD;AAKA;;;;"}