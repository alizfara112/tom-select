{"version":3,"file":"plugin.js","sources":["../../../../src/plugins/optgroup_columns/plugin.ts"],"sourcesContent":["/**\n * Plugin: \"optgroup_columns\" (Tom Select.js)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport TomSelect from '../../tom-select.js';\nimport * as constants from '../../constants.js';\nimport { parentMatch, nodeIndex } from '../../vanilla';\n\nTomSelect.define('optgroup_columns', function() {\n\tvar self = this;\n\n\tvar orig_keydown = self.onKeyDown;\n\n\tself.hook('instead','onKeyDown',function(evt){\n\t\tvar index, option, options, optgroup;\n\n\t\tif( !self.isOpen || !(evt.keyCode === constants.KEY_LEFT || evt.keyCode === constants.KEY_RIGHT)) {\n\t\t\treturn orig_keydown.apply(self,arguments);\n\t\t}\n\n\t\toptgroup\t\t\t= parentMatch(self.activeOption,'[data-group]');\n\t\tindex\t\t\t\t= nodeIndex(self.activeOption,'[data-selectable]');\n\n\t\tif( evt.keyCode === constants.KEY_LEFT ){\n\t\t\toptgroup = optgroup.previousSibling;\n\t\t} else {\n\t\t\toptgroup = optgroup.nextSibling;\n\t\t}\n\n\t\tif( !optgroup ){\n\t\t\treturn;\n\t\t}\n\n\t\toptions\t\t\t\t= optgroup.querySelectorAll('[data-selectable]');\n\t\toption\t\t\t\t= options[ Math.min(options.length - 1, index) ];\n\n\t\tif( option ){\n\t\t\tself.setActiveOption(option);\n\t\t}\n\n\t});\n\n});\n"],"names":["TomSelect","define","self","orig_keydown","onKeyDown","hook","evt","index","option","options","optgroup","isOpen","keyCode","constants","apply","arguments","parentMatch","activeOption","nodeIndex","previousSibling","nextSibling","querySelectorAll","Math","min","length","setActiveOption"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMAA,SAAS,CAACC,MAAV,CAAiB,kBAAjB,EAAqC,YAAW;AAC/C,MAAIC,IAAI,GAAG,IAAX;AAEA,MAAIC,YAAY,GAAGD,IAAI,CAACE,SAAxB;AAEAF,EAAAA,IAAI,CAACG,IAAL,CAAU,SAAV,EAAoB,WAApB,EAAgC,UAASC,GAAT,EAAa;AAC5C,QAAIC,KAAJ,EAAWC,MAAX,EAAmBC,OAAnB,EAA4BC,QAA5B;;AAEA,QAAI,CAACR,IAAI,CAACS,MAAN,IAAgB,EAAEL,GAAG,CAACM,OAAJ,KAAgBC,QAAhB,IAAsCP,GAAG,CAACM,OAAJ,KAAgBC,SAAxD,CAApB,EAAkG;AACjG,aAAOV,YAAY,CAACW,KAAb,CAAmBZ,IAAnB,EAAwBa,SAAxB,CAAP;AACA;;AAEDL,IAAAA,QAAQ,GAAKM,WAAW,CAACd,IAAI,CAACe,YAAN,EAAmB,cAAnB,CAAxB;AACAV,IAAAA,KAAK,GAAMW,SAAS,CAAChB,IAAI,CAACe,YAAN,EAAmB,mBAAnB,CAApB;;AAEA,QAAIX,GAAG,CAACM,OAAJ,KAAgBC,QAApB,EAAwC;AACvCH,MAAAA,QAAQ,GAAGA,QAAQ,CAACS,eAApB;AACA,KAFD,MAEO;AACNT,MAAAA,QAAQ,GAAGA,QAAQ,CAACU,WAApB;AACA;;AAED,QAAI,CAACV,QAAL,EAAe;AACd;AACA;;AAEDD,IAAAA,OAAO,GAAMC,QAAQ,CAACW,gBAAT,CAA0B,mBAA1B,CAAb;AACAb,IAAAA,MAAM,GAAMC,OAAO,CAAEa,IAAI,CAACC,GAAL,CAASd,OAAO,CAACe,MAAR,GAAiB,CAA1B,EAA6BjB,KAA7B,CAAF,CAAnB;;AAEA,QAAIC,MAAJ,EAAY;AACXN,MAAAA,IAAI,CAACuB,eAAL,CAAqBjB,MAArB;AACA;AAED,GA3BD;AA6BA,CAlCD"}