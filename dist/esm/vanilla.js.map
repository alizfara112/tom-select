{"version":3,"file":"vanilla.js","sources":["../../src/vanilla.ts"],"sourcesContent":["\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport function getDom( query:any ):HTMLElement{\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( query.indexOf('<') > -1 ){\n\t\tlet div = document.createElement('div');\n\t\tdiv.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn div.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport function escapeQuery(query:string):string{\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport function triggerEvent( dom_el:HTMLElement, event_name:string ):void{\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport function applyCSS( dom_el:HTMLElement, css:{ [key: string]: string|number }):void{\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport function addClasses( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ){\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export function removeClasses( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ){\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport function classesArray(args:string[]|string[][]):string[]{\n\tvar classes:string[] = [];\n\tfor( let _classes of args ){\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\11\\12\\14\\15\\40]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t}\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport function castAsArray(arg:any):Array<any>{\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport function parentMatch( target:HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void{\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * < 0 - left (first)\n *\n */\nexport function getTail( list:Array<any>|NodeList, direction:number ):any{\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport function isEmptyObject(obj:object):boolean{\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport function nodeIndex( el:Element, amongst?:string ):number{\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport function setAttr(el:Element,attrs:{ [key: string]: string }){\n\tfor( const attr in attrs ){\n\t\tel.setAttribute(attr, attrs[attr]);\n\t}\n}\n"],"names":["getDom","query","jquery","HTMLElement","indexOf","div","document","createElement","innerHTML","trim","firstChild","querySelector","escapeQuery","replace","triggerEvent","dom_el","event_name","event","createEvent","initEvent","dispatchEvent","applyCSS","css","Object","assign","style","addClasses","elmts","classes","norm_classes","classesArray","castAsArray","map","el","cls","classList","add","removeClasses","remove","args","_classes","split","Array","isArray","concat","filter","Boolean","arg","parentMatch","target","selector","wrapper","contains","matches","parentNode","getTail","list","direction","length","isEmptyObject","obj","keys","nodeIndex","amongst","nodeName","i","previousElementSibling","setAttr","attrs","attr","setAttribute"],"mappings":"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"}