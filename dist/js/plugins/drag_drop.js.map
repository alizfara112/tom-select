{"version":3,"file":"drag_drop.js","sources":["../../../src/plugins/drag_drop/plugin.js"],"sourcesContent":["/**\n * Plugin: \"drag_drop\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\nimport TomSelect from '../../tom-select.js';\n\nTomSelect.define('drag_drop',function(options) {\n\tif (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n\tif (this.settings.mode !== 'multi') return;\n\tvar self = this;\n\n\tvar orig_lock\t\t= self.lock;\n\tvar orig_unlock\t\t= self.unlock;\n\n\tself.hook('instead','lock',function(){\n\t\tvar sortable = self.control.dataset.sortable;\n\t\tif (sortable) sortable.disable();\n\t\treturn orig_lock.apply(self, arguments);\n\t});\n\n\tself.hook('instead','unlock',function(){\n\t\tvar sortable = self.control.dataset.sortable;\n\t\tif (sortable) sortable.enable();\n\t\treturn orig_unlock.apply(self, arguments);\n\t});\n\n\tself.hook('after','setup',function(){\n\t\tvar $control = $(self.control).sortable({\n\t\t\titems: '[data-value]',\n\t\t\tforcePlaceholderSize: true,\n\t\t\tdisabled: self.isLocked,\n\t\t\tstart: function(e, ui) {\n\t\t\t\tui.placeholder.css('width', ui.helper.css('width'));\n\t\t\t\t$control.css({overflow: 'visible'});\n\t\t\t},\n\t\t\tstop: function() {\n\t\t\t\t$control.css({overflow: 'hidden'});\n\n\t\t\t\tvar values = [];\n\t\t\t\t$control.children('[data-value]').each(function() {\n\t\t\t\t\tvalues.push($(this).attr('data-value'));\n\t\t\t\t});\n\n\t\t\t\tself.setValue(values);\n\t\t\t}\n\t\t});\n\n\t});\n\n});\n"],"names":["TomSelect","define","options","$","fn","sortable","Error","settings","mode","self","orig_lock","lock","orig_unlock","unlock","hook","control","dataset","disable","apply","arguments","enable","$control","items","forcePlaceholderSize","disabled","isLocked","start","e","ui","placeholder","css","helper","overflow","stop","values","children","each","push","attr","setValue"],"mappings":";;;;;;;;;;;;;;;CAAA;;;;;;;;;;;;;;AAgBAA,8BAAS,CAACC,MAAV,CAAiB,WAAjB,EAA6B,UAASC,OAAT,EAAkB;CAC9C,MAAI,CAACC,CAAC,CAACC,EAAF,CAAKC,QAAV,EAAoB,MAAM,IAAIC,KAAJ,CAAU,uDAAV,CAAN;CACpB,MAAI,KAAKC,QAAL,CAAcC,IAAd,KAAuB,OAA3B,EAAoC;CACpC,MAAIC,IAAI,GAAG,IAAX;CAEA,MAAIC,SAAS,GAAID,IAAI,CAACE,IAAtB;CACA,MAAIC,WAAW,GAAIH,IAAI,CAACI,MAAxB;CAEAJ,EAAAA,IAAI,CAACK,IAAL,CAAU,SAAV,EAAoB,MAApB,EAA2B,YAAU;CACpC,QAAIT,QAAQ,GAAGI,IAAI,CAACM,OAAL,CAAaC,OAAb,CAAqBX,QAApC;CACA,QAAIA,QAAJ,EAAcA,QAAQ,CAACY,OAAT;CACd,WAAOP,SAAS,CAACQ,KAAV,CAAgBT,IAAhB,EAAsBU,SAAtB,CAAP;CACA,GAJD;CAMAV,EAAAA,IAAI,CAACK,IAAL,CAAU,SAAV,EAAoB,QAApB,EAA6B,YAAU;CACtC,QAAIT,QAAQ,GAAGI,IAAI,CAACM,OAAL,CAAaC,OAAb,CAAqBX,QAApC;CACA,QAAIA,QAAJ,EAAcA,QAAQ,CAACe,MAAT;CACd,WAAOR,WAAW,CAACM,KAAZ,CAAkBT,IAAlB,EAAwBU,SAAxB,CAAP;CACA,GAJD;CAMAV,EAAAA,IAAI,CAACK,IAAL,CAAU,OAAV,EAAkB,OAAlB,EAA0B,YAAU;CACnC,QAAIO,QAAQ,GAAGlB,CAAC,CAACM,IAAI,CAACM,OAAN,CAAD,CAAgBV,QAAhB,CAAyB;CACvCiB,MAAAA,KAAK,EAAE,cADgC;CAEvCC,MAAAA,oBAAoB,EAAE,IAFiB;CAGvCC,MAAAA,QAAQ,EAAEf,IAAI,CAACgB,QAHwB;CAIvCC,MAAAA,KAAK,EAAE,eAASC,CAAT,EAAYC,EAAZ,EAAgB;CACtBA,QAAAA,EAAE,CAACC,WAAH,CAAeC,GAAf,CAAmB,OAAnB,EAA4BF,EAAE,CAACG,MAAH,CAAUD,GAAV,CAAc,OAAd,CAA5B;CACAT,QAAAA,QAAQ,CAACS,GAAT,CAAa;CAACE,UAAAA,QAAQ,EAAE;CAAX,SAAb;CACA,OAPsC;CAQvCC,MAAAA,IAAI,EAAE,gBAAW;CAChBZ,QAAAA,QAAQ,CAACS,GAAT,CAAa;CAACE,UAAAA,QAAQ,EAAE;CAAX,SAAb;CAEA,YAAIE,MAAM,GAAG,EAAb;CACAb,QAAAA,QAAQ,CAACc,QAAT,CAAkB,cAAlB,EAAkCC,IAAlC,CAAuC,YAAW;CACjDF,UAAAA,MAAM,CAACG,IAAP,CAAYlC,CAAC,CAAC,IAAD,CAAD,CAAQmC,IAAR,CAAa,YAAb,CAAZ;CACA,SAFD;CAIA7B,QAAAA,IAAI,CAAC8B,QAAL,CAAcL,MAAd;CACA;CAjBsC,KAAzB,CAAf;CAoBA,GArBD;CAuBA,CA3CD;;;;;;"}