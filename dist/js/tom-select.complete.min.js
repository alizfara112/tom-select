!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TomSelect=e()}(this,(function(){"use strict";var t=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},e.off=function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},e.trigger=function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))},t}();var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=s(String(t||"")))>(e=s(String(e||"")))?1:e>t?-1:0},i=function(t,e,i){if(t&&e){if(!i)return t[e];for(var n=e.split(".");n.length&&(t=t[n.shift()]););return t}},n={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},s=function(){var t,e,i,s,o="",r={};for(i in n)if(n.hasOwnProperty(i))for(o+=s=n[i].substring(2,n[i].length-1),t=0,e=s.length;t<e;t++)r[s.charAt(t)]=i;var a=new RegExp("["+o+"]","g");return function(t){return t.replace(a,(function(t){return r[t]})).toLowerCase()}}(),o=function(){function t(t,e){this.items=t,this.settings=e||{diacritics:!0}}var s=t.prototype;return s.tokenize=function(t,e){if(!(t=String(t||"").toLowerCase().trim())||!t.length)return[];var i,s,o,r,a=[],l=t.split(/ +/);for(i=0,s=l.length;i<s;i++){if(o=(l[i]+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),this.settings.diacritics)for(r in n)n.hasOwnProperty(r)&&(o=o.replace(new RegExp(r,"g"),n[r]));e&&(o="\\b"+o),a.push({string:l[i],regex:new RegExp(o,"i")})}return a},s.iterator=function(t,e){var i;i=Array.isArray(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},i.apply(t,[e])},s.getScoreFunction=function(t,e){var n,s,o,r;t=this.prepareSearch(t,e),s=t.tokens,n=t.options.fields,o=s.length,r=t.options.nesting;var a,l=function(t,e){var i,n;return t?-1===(n=(t=String(t||"")).search(e.regex))?0:(i=e.string.length/t.length,0===n&&(i+=.5),i):0},u=(a=n.length)?1===a?function(t,e){return l(i(e,n[0],r),t)}:function(t,e){for(var s=0,o=0;s<a;s++)o+=l(i(e,n[s],r),t);return o/a}:function(){return 0};return o?1===o?function(t){return u(s[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,n=0;i<o;i++){if((e=u(s[i],t))<=0)return 0;n+=e}return n/o}:function(t){for(var e=0,i=0;e<o;e++)i+=u(s[e],t);return i/o}:function(){return 0}},s.getSortFunction=function(t,n){var s,o,r,a,l,u,c,p,d,h,g;if(g=!(t=(r=this).prepareSearch(t,n)).query&&n.sort_empty||n.sort,d=function(t,e){return"$score"===t?e.score:i(r.items[e.id],t,n.nesting)},l=[],g)for(s=0,o=g.length;s<o;s++)(t.query||"$score"!==g[s].field)&&l.push(g[s]);if(t.query){for(h=!0,s=0,o=l.length;s<o;s++)if("$score"===l[s].field){h=!1;break}h&&l.unshift({field:"$score",direction:"desc"})}else for(s=0,o=l.length;s<o;s++)if("$score"===l[s].field){l.splice(s,1);break}for(p=[],s=0,o=l.length;s<o;s++)p.push("desc"===l[s].direction?-1:1);return(u=l.length)?1===u?(a=l[0].field,c=p[0],function(t,i){return c*e(d(a,t),d(a,i))}):function(t,i){var n,s,o;for(n=0;n<u;n++)if(o=l[n].field,s=p[n]*e(d(o,t),d(o,i)))return s;return 0}:null},s.prepareSearch=function(t,e){if("object"==typeof t)return t;var i=(e=Object.assign({},e)).fields,n=e.sort,s=e.sort_empty;return i&&!Array.isArray(i)&&(e.fields=[i]),n&&!Array.isArray(n)&&(e.sort=[n]),s&&!Array.isArray(s)&&(e.sort_empty=[s]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t,e.respect_word_boundaries),total:0,items:[]}},s.search=function(t,e){var i,n,s,o,r=this;return n=this.prepareSearch(t,e),e=n.options,t=n.query,o=e.score||r.getScoreFunction(n),t.length?r.iterator(r.items,(function(t,s){i=o(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:s})})):r.iterator(r.items,(function(t,e){n.items.push({score:1,id:e})})),(s=r.getSortFunction(n,e))&&n.items.sort(s),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n},t}();function r(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?new RegExp(e,"i"):e;!function t(e){var n=0;if(3===e.nodeType){var s=e.data.search(i);if(s>=0&&e.data.length>0){var o=e.data.match(i),r=document.createElement("span");r.className="highlight";var a=e.splitText(s),l=(a.splitText(o[0].length),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),n=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var u=0;u<e.childNodes.length;++u)u+=t(e.childNodes[u]);return n}(t)}}var a={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,render:{}};function l(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""}function u(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function c(t,e,i){var n,s=t.trigger,o={};for(n in t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return s.apply(t,arguments);o[i]=arguments},i.apply(t,[]),t.trigger=s,o)o.hasOwnProperty(n)&&s.apply(t,o[n])}function p(t,e){var i=Object.assign({},a,e),n=i.dataAttr,s=i.labelField,o=i.valueField,r=i.disabledField,u=i.optgroupField,c=i.optgroupLabelField,p=i.optgroupValueField,d=t.tagName.toLowerCase(),h=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!h&&!i.allowEmptyOption){var g=t.querySelector('option[value=""]');g&&(h=g.textContent)}var f={placeholder:h,options:[],optgroups:[],items:[]};return"select"===d?function(){var e,a,d,h,g=f.options,v={},m=function(t){var e=Object.assign({},t.dataset),i=n&&e[n];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},y=function(t,e){var n=l(t.value);if(n||i.allowEmptyOption)if(v.hasOwnProperty(n)){if(e){var a=v[n][u];a?Array.isArray(a)?a.push(e):v[n][u]=[a,e]:v[n][u]=e}}else{var c=m(t);c[s]=c[s]||t.textContent,c[o]=c[o]||n,c[r]=c[r]||t.disabled,c[u]=c[u]||e,v[n]=c,g.push(c),t.selected&&f.items.push(n)}},w=function(t){var e,i,n,s,o;for((n=t.getAttribute("label"))&&((s=m(t))[c]=n,s[p]=n,s[r]=t.disabled,f.optgroups.push(s)),e=0,i=(o=t.children).length;e<i;e++)y(o[e],n)};for(f.maxItems=t.hasAttribute("multiple")?null:1,e=0,a=(h=t.children).length;e<a;e++)"optgroup"===(d=h[e].tagName.toLowerCase())?w(h[e]):"option"===d&&y(h[e])}():function(){var e,r,a,l,u=t.getAttribute(n);if(u)for(f.options=JSON.parse(u),e=0,r=f.options.length;e<r;e++)f.items.push(f.options[e][o]);else{var c=t.value.trim()||"";if(!i.allowEmptyOption&&!c.length)return;for(e=0,r=(a=c.split(i.delimiter)).length;e<r;e++)(l={})[s]=a[e],l[o]=a[e],f.options.push(l);f.items=a}}(),Object.assign({},a,f,e)}function d(t){if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(t.indexOf("<")>-1){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)}function h(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)}function g(t,e){Object.keys(e).forEach((function(i){t.style[i]=e[i]}))}function f(t){var e=m.apply(null,arguments);(t=y(t)).map((function(t){e.map((function(e){t.classList.add(e)}))}))}function v(t){var e=m.apply(null,arguments);(t=y(t)).map((function(t){e.map((function(e){t.classList.remove(e)}))}))}function m(){for(var t=[],e=1;e<arguments.length;e++){var i=arguments[e];"string"==typeof i&&(i=i.trim().split(/[\11\12\14\15\40]/)),Array.isArray(i)&&(t=t.concat(i))}return t.filter(Boolean)}function y(t){return Array.isArray(t)||(t=[t]),t}function w(t,e,i){if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}}function O(t,e){return e>0?t[t.length-1]:t[0]}function b(t,e){if(!t)return-1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i}var C,A=function(t){var e,i;function n(e,i){var n,s,r=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n=t.call(this)||this);if((e=d(e)).tomselect)throw new Error("Tom Select already initialized on this element");return e.tomselect=r,i=p(e,i),s=(window.getComputedStyle&&window.getComputedStyle(e,null)).getPropertyValue("direction"),Object.assign(r,{order:0,settings:i,input:e,tabIndex:e.getAttribute("tabindex")||"",is_select_tag:"select"===e.tagName.toLowerCase(),rtl:/rtl/i.test(s),highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.required,isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},activeOption:null,activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{item:{},option:{}}}),r.settings.load&&r.settings.loadThrottle&&(r.settings.load=r.loadDebounce(r.settings.load,r.settings.loadThrottle)),r.sifter=new o(n.options,{diacritics:i.diacritics}),r.setupOptions(r.settings.options,r.settings.optgroups),delete r.settings.optgroups,delete r.settings.options,r.settings.mode=r.settings.mode||(1===r.settings.maxItems?"single":"multi"),"boolean"!=typeof r.settings.hideSelected&&(r.settings.hideSelected="multi"===r.settings.mode),"string"==typeof r.settings.createFilter&&(r.settings.createFilter=new RegExp(r.settings.createFilter)),r.initializePlugins(r.settings.plugins),r.setupCallbacks(),r.setupTemplates(),r.setup(),n}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var s=n.prototype;return s.setup=function(){var t,e,i,n,s,o,r,a,l=this,u=l.settings,c=l.input;if(o=l.settings.mode,r=c.getAttribute("class")||"",f(t=d("<div>"),u.wrapperClass,r,o),f(e=d('<div class="items">'),u.inputClass),t.append(e),f(n=l.render("dropdown"),u.dropdownClass,o),f(s=d('<div style="scroll-behavior: smooth;">'),u.dropdownContentClass),n.append(s),d(u.dropdownParent||t).appendChild(n),u.controlInput)i=d(u.controlInput);else{i=d('<input type="text" autocomplete="off" />');for(var p=["autocorrect","autocapitalize","autocomplete"],h=0;h<p.length;h++){var g=p[h];c.getAttribute(g)&&i.setAttribute(g,c.getAttribute(g))}}if(u.controlInput||(i.setAttribute("tabindex",c.disabled?"-1":l.tabIndex),e.appendChild(i)),a=c.getAttribute("id")){i.setAttribute("id",a+"-tomselected");var v=document.querySelector("label[for='"+a+"']");v&&v.setAttribute("for",a+"-tomselected")}if(l.settings.copyClassesToDropdown&&f(n,r),t.style.width=c.style.width,l.plugins.names.length&&f([t,n],"plugin-"+l.plugins.names.join(" plugin-")),(null===u.maxItems||u.maxItems>1)&&l.is_select_tag&&c.setAttribute("multiple","multiple"),l.settings.placeholder&&i.setAttribute("placeholder",u.placeholder),!l.settings.splitOn&&l.settings.delimiter){var m=l.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");l.settings.splitOn=new RegExp("\\s*"+m+"+\\s*")}i.type=c.type,l.control=e,l.control_input=i,l.wrapper=t,l.dropdown=n,l.dropdown_content=s,function(t,e,i,n){for(var s=e.split(/\s/),o=function(e){var s=w(e.target,i,t);s&&(e.delegateTarget=s,n.call(s,e))},r=0;r<s.length;r++)t.addEventListener(s[r],o,!0)}(n,"mouseenter","[data-selectable]",(function(){return l.onOptionHover.apply(l,arguments)})),e.addEventListener("mousedown",(function(t){var i=w(t.target,"."+l.settings.itemClass,e);return i?(t.delegateTarget=i,l.onItemSelect.call(l,t)):l.onMouseDown.call(l,t)})),e.addEventListener("click",(function(){return l.onClick.apply(l,arguments)})),i.addEventListener("mousedown",(function(t){t.stopPropagation()})),i.addEventListener("keydown",(function(){return l.onKeyDown.apply(l,arguments)})),i.addEventListener("keyup",(function(){return l.onKeyUp.apply(l,arguments)})),i.addEventListener("keypress",(function(){return l.onKeyPress.apply(l,arguments)})),i.addEventListener("resize",(function(){l.positionDropdown.apply(l,[])})),i.addEventListener("blur",(function(){return l.onBlur.apply(l,arguments)})),i.addEventListener("focus",(function(){return l.ignoreBlur=!1,l.onFocus.apply(l,arguments)})),i.addEventListener("paste",(function(){return l.onPaste.apply(l,arguments)}));var y=function(t){if(l.wrapper.contains(t.target)){t.preventDefault(),t.stopPropagation();var e=w(t.target,"[data-selectable]",l.wrapper);e&&l.onOptionSelect(e,!0)}else l.isFocused&&l.blur(t.target)},O=function(){l.isOpen&&l.positionDropdown.apply(l,arguments)},b=function(){l.ignoreHover=!1};document.addEventListener("mousedown",y),window.addEventListener("sroll",O),window.addEventListener("resize",O),window.addEventListener("mousemove",b),l._destroy=function(){document.removeEventListener("mousedown",y),window.removeEventListener("mousemove",b),window.removeEventListener("sroll",O),window.removeEventListener("resize",O)};for(var C=[];c.children.length>0;)C.push(c.children[0]),c.children[0].remove();this.revertSettings={children:C,tabindex:c.getAttribute("tabindex")},c.setAttribute("tabindex",-1),c.setAttribute("hidden","hidden"),c.insertAdjacentElement("afterend",l.wrapper),l.setValue(u.items),delete u.items,c.addEventListener("invalid",(function(t){t.preventDefault(),l.isInvalid||(l.isInvalid=!0,l.refreshState())})),l.updateOriginalInput(),l.refreshItems(),l.refreshState(),l.isSetup=!0,c.disabled&&l.disable(),l.on("change",this.onChange),f(c,"tomselected"),l.trigger("initialize"),!0===u.preload&&l.onSearchChange("")},s.setupOptions=function(t,e){var i,n;for(e=e||[],i=0,n=(t=t||[]).length;i<n;i++)this.registerOption(t[i]);for(i=0,n=e.length;i<n;i++)this.registerOptionGroup(e[i])},s.setupTemplates=function(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,n={optgroup:function(t,e){var i=document.createElement("div");return i.className="optgroup",i.appendChild(t.options),i},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,i){return"<div>"+i(t[e])+"</div>"},item:function(t,i){return"<div>"+i(t[e])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"},no_results:function(t,e){return'<div class="no-results">No results found</div>'},loading:function(t,e){return'<div class="spinner"></div>'},dropdown:function(){return'<div style="display:none"></div>'}};t.settings.render=Object.assign({},n,t.settings.render)},s.setupCallbacks=function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)},s.onClick=function(t){var e=this;e.isFocused&&e.isOpen||(e.focus(),t.preventDefault())},s.onMouseDown=function(t){var e=this;if(e.isFocused){if(t.target!==e.control_input)return"single"===e.settings.mode?e.isOpen?e.close():e.open():e.setActiveItem(null),!1}else window.setTimeout((function(){e.focus()}),0)},s.onChange=function(){h(this.input,"change")},s.onPaste=function(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?t.preventDefault():e.settings.splitOn&&setTimeout((function(){var t=e.inputValue();if(t.match(e.settings.splitOn))for(var i=t.trim().split(e.settings.splitOn),n=0,s=i.length;n<s;n++)e.createItem(i[n])}),0)},s.onKeyPress=function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},s.onKeyDown=function(t){var e=this;t.target,e.control_input;if(e.ignoreHover=!0,e.isLocked)9!==t.keyCode&&t.preventDefault();else{switch(t.keyCode){case 65:if(e.isKeyDown(17,t))return void e.selectAll();break;case 27:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){var i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i,!0)}return void t.preventDefault();case 38:if(e.activeOption){var n=e.getAdjacent(e.activeOption,-1);n&&e.setActiveOption(n,!0)}return void t.preventDefault();case 13:return void(e.isOpen&&e.activeOption&&(e.onOptionSelect(e.activeOption),t.preventDefault()));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return e.settings.selectOnTab&&e.isOpen&&e.activeOption&&(e.onOptionSelect(e.activeOption),t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case 8:case 46:return void e.deleteSelection(t)}!e.isInputHidden||e.isKeyDown(17,t)||t.preventDefault()}},s.onKeyUp=function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var i=e.inputValue();e.lastValue!==i&&(e.lastValue=i,e.onSearchChange(i),e.refreshOptions(),e.trigger("type",i))},s.onSearchChange=function(t){var e=this,i=e.settings.load;i&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load((function(n){i.apply(e,[t,n])}))))},s.onFocus=function(t){var e=this,i=e.isFocused;if(e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),i||e.trigger("focus"),e.activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},s.onBlur=function(t,e){var i=this;if(i.isFocused){if(i.isFocused=!1,i.ignoreFocus=!1,!i.ignoreBlur&&document.activeElement===i.dropdown_content)return i.ignoreBlur=!0,void i.onFocus(t);var n=function(){i.close(),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),e&&e.focus&&e.focus(),i.isBlurring=!1,i.trigger("blur")};i.isBlurring=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},s.onOptionHover=function(t){this.ignoreHover||this.setActiveOption(t.delegateTarget,!1)},s.onOptionSelect=function(t,e){var i,n=this;t&&(t.parentNode&&t.parentNode.matches("[data-disabled]")||(t.classList.contains("create")?n.createItem(null,(function(){n.settings.closeAfterSelect&&n.close()})):void 0!==(i=t.dataset.value)&&(n.lastQuery=null,n.addItem(i),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&e&&n.setActiveOption(n.getOption(i)))))},s.onItemSelect=function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.delegateTarget,t))},s.load=function(t){var e=this;f(e.wrapper,e.settings.loadingClass),e.loading++,t.call(e,(function(t,i){e.loading=Math.max(e.loading-1,0),e.lastQuery=null,e.setupOptions(t,i),e.refreshOptions(e.isFocused&&!e.isInputHidden),e.loading||v(e.wrapper,e.settings.loadingClass),e.trigger("load",t)}))},s.loadDebounce=function(t,e){var i;return function(){var n=this,s=arguments;i&&(n.loading=Math.max(n.loading-1,0)),window.clearTimeout(i),i=window.setTimeout((function(){i=null,t.apply(n,s)}),e)}},s.setTextboxValue=function(t){var e=this.control_input;e.value!==t&&(e.value=t,h(e,"update"),this.lastValue=t)},s.getValue=function(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)},s.setValue=function(t,e){c(this,e?[]:["change"],(function(){this.clear(e),this.addItems(t,e)}))},s.setActiveItem=function(t,e){var i,n,s,o,r,a;if("single"!==this.settings.mode){if(!t)return v(this.activeItems,"active"),this.activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(i=e&&e.type.toLowerCase())&&this.isKeyDown(16,e)&&this.activeItems.length){for(a=this.getLastActive(),(s=Array.prototype.indexOf.call(this.control.children,a))>(o=Array.prototype.indexOf.call(this.control.children,t))&&(r=s,s=o,o=r),n=s;n<=o;n++)t=this.control.children[n],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);e.preventDefault()}else"mousedown"===i&&this.isKeyDown(17,e)||"keydown"===i&&this.isKeyDown(16,e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(v(this.activeItems,"active"),this.activeItems=[],this.setActiveItemClass(t));this.hideInput(),this.isFocused||this.focus()}},s.setActiveItemClass=function(t){var e=this.control.querySelector(".last-active");e&&v(e,"last-active"),f(t,"active last-active"),-1==this.activeItems.indexOf(t)&&this.activeItems.push(t)},s.removeActiveItem=function(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),v(t,"active")},s.setActiveOption=function(t,e){var i,n,s;t!==this.activeOption&&(this.activeOption&&v(this.activeOption,"active"),this.activeOption=null,t&&(this.activeOption=t,f(t,"active"),(e||void 0===e)&&(i=this.dropdown_content.clientHeight,e=this.dropdown_content.scrollTop||0,n=this.activeOption.offsetHeight,(s=this.activeOption.getBoundingClientRect().top-this.dropdown_content.getBoundingClientRect().top+e)+n>i+e?this.dropdown_content.scrollTop=s-i+n:s<e&&(this.dropdown_content.scrollTop=s))))},s.selectAll=function(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(f(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())},s.hideInput=function(){this.settings.controlInput||(this.setTextboxValue(""),g(this.control_input,{opacity:0,position:"absolute",left:(this.rtl?1e4:-1e4)+"px"}),this.isInputHidden=!0)},s.showInput=function(){this.settings.controlInput||(g(this.control_input,{opacity:1,position:"relative",left:0}),this.isInputHidden=!1)},s.inputValue=function(){return this.control_input.value.trim()},s.focus=function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.focus(),window.setTimeout((function(){t.ignoreFocus=!1,t.onFocus()}),0))},s.blur=function(t){this.control_input.blur(),this.onBlur(null,t)},s.getScoreFunction=function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},s.getSearchOptions=function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}},s.search=function(t){var e,i,n,s=this,o=s.settings,r=this.getSearchOptions();if(o.score&&"function"!=typeof(n=s.settings.score.call(this,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(t!==s.lastQuery?(s.lastQuery=t,i=s.sifter.search(t,Object.assign(r,{score:n})),s.currentResults=i):i=Object.assign({},s.currentResults),o.hideSelected)for(e=i.items.length-1;e>=0;e--)-1!==s.items.indexOf(l(i.items[e].id))&&i.items.splice(e,1);return i},s.refreshOptions=function(t){var e,i,n,s,o,a,u,c,p,d,h,g,m;void 0===t&&(t=!0);var y,w=this,O=w.inputValue(),b=w.search(O),C=w.activeOption&&l(w.activeOption.dataset.value),A=!1;for(s=b.items.length,"number"==typeof w.settings.maxOptions&&(s=Math.min(s,w.settings.maxOptions)),s>0&&(A=!0),o={},a=[],e=0;e<s;e++){var I=w.options[b.items[e].id],_=l(I[w.settings.valueField]),S=w.getOption(_);for(S||(S=w.render("option",I)),u=I[w.settings.optgroupField]||"",i=0,n=(c=Array.isArray(u)?u:[u])&&c.length;i<n;i++)u=c[i],w.optgroups.hasOwnProperty(u)||(u=""),o.hasOwnProperty(u)||(o[u]=document.createDocumentFragment(),a.push(u)),i>0&&v(S=S.cloneNode(!0),"active"),o[u].appendChild(S)}for(this.settings.lockOptgroupOrder&&a.sort((function(t,e){return(w.optgroups[t].$order||0)-(w.optgroups[e].$order||0)})),p=document.createDocumentFragment(),e=0,s=a.length;e<s;e++)if(u=a[e],w.optgroups.hasOwnProperty(u)&&o[u].children.length){var x=document.createDocumentFragment();x.appendChild(w.render("optgroup_header",w.optgroups[u])),x.appendChild(o[u]);var F=w.render("optgroup",{group:w.optgroups[u],options:x});p.appendChild(F)}else p.appendChild(o[u]);if(w.dropdown_content.innerHTML="",w.dropdown_content.appendChild(p),w.settings.highlight&&(w.dropdown_content,y=document.querySelectorAll("span.highlight"),Array.prototype.forEach.call(y,(function(t,e){var i=t.parentNode;i.replaceChild(t.firstChild,t),i.normalize()})),b.query.length&&b.tokens.length))for(e=0,s=b.tokens.length;e<s;e++)r(w.dropdown_content,b.tokens[e].regex);if(!w.settings.hideSelected)for(e=0,s=w.items.length;e<s;e++){var k=w.getOption(w.items[e]);k&&f(k,"selected")}var L=function(t){A=!0;var e=w.render(t,{input:O});return w.dropdown_content.insertBefore(e,w.dropdown_content.firstChild),e};if(w.loading?L("loading"):0===b.items.length&&w.settings.render.no_results&&O.length&&L("no_results"),(d=w.canCreate(O))&&(m=L("option_create")),w.hasOptions=b.items.length>0||d,A){if(b.items.length>0)if((g=C&&w.getOption(C))&&w.dropdown_content.contains(g))h=g;else if("single"===w.settings.mode&&w.items.length)h=w.getOption(w.items[0]);else{var D=0;m&&!w.settings.addPrecedence&&(D=1),h=w.selectable()[D]}else h=m;w.setActiveOption(h),t&&!w.isOpen&&w.open()}else w.setActiveOption(null),t&&w.isOpen&&w.close()},s.selectable=function(){return this.dropdown_content.querySelectorAll("[data-selectable]")},s.addOption=function(t){var e,i,n,s=this;if(Array.isArray(t))for(e=0,i=t.length;e<i;e++)s.addOption(t[e]);else(n=s.registerOption(t))&&(s.userOptions[n]=!0,s.lastQuery=null,s.trigger("option_add",n,t))},s.registerOption=function(t){var e=l(t[this.settings.valueField]);return null!=e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},s.registerOptionGroup=function(t){var e=l(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},s.addOptionGroup=function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},s.removeOptionGroup=function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))},s.clearOptionGroups=function(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")},s.updateOption=function(t,e){var i,n,s,o,r,a,u,c=this;if(t=l(t),s=l(e[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");u=c.options[t].$order,s!==t&&(delete c.options[t],-1!==(o=c.items.indexOf(t))&&c.items.splice(o,1,s)),e.$order=e.$order||u,c.options[s]=e,r=c.renderCache.item,a=c.renderCache.option,r&&(delete r[t],delete r[s]),a&&(delete a[t],delete a[s]),-1!==c.items.indexOf(s)&&(i=c.getItem(t),n=c.render("item",e),i.classList.contains("active")&&f(n,"active"),i.parentNode.insertBefore(n,i),i.remove()),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},s.removeOption=function(t,e){var i=this;t=l(t);var n=i.renderCache.item,s=i.renderCache.option;n&&delete n[t],s&&delete s[t],delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)},s.clearOptions=function(){this.loadedSearches={},this.userOptions={},this.clearCache();var t={};for(var e in this.options)this.options.hasOwnProperty(e)&&this.items.indexOf(e)>=0&&(t[e]=this.options[e]);this.options=this.sifter.items=t,this.lastQuery=null,this.trigger("option_clear")},s.getOption=function(t){return this.renderCache.option.hasOwnProperty(t)?this.renderCache.option[t]:this.getElementWithValue(t,this.selectable())},s.getAdjacent=function(t,e,i){if(void 0===i&&(i="option"),t){var n=this,s=n.settings.optionClass,o=n.dropdown;"item"==i&&(o=n.control,s=n.settings.itemClass);for(var r=o.querySelectorAll("."+s),a=0;a<r.length;a++)if(r[a]==t)return e>0?r[a+1]:r[a-1]}},s.getElementWithValue=function(t,e){if(null!=(t=l(t)))for(var i=0,n=e.length;i<n;i++)if(e[i].getAttribute("data-value")===t)return e[i]},s.getItem=function(t){return this.getElementWithValue(t,this.control.children)},s.addItems=function(t,e){this.buffer=document.createDocumentFragment();for(var i=this.control.children,n=0;n<i.length;n++)this.buffer.appendChild(i[n]);for(var s=Array.isArray(t)?t:[t],o=(n=0,s.length);n<o;n++)this.isPending=n<o-1,this.addItem(s[n],e);var r=this.control;r.insertBefore(this.buffer,r.firstChild),this.buffer=null},s.addItem=function(t,e){c(this,e?[]:["change"],(function(){var i,n,s=this,o=s.settings.mode;if(t=l(t),(-1===s.items.indexOf(t)||("single"===o&&s.close(),"single"!==o&&s.settings.duplicates))&&s.options.hasOwnProperty(t)&&("single"===o&&s.clear(e),("multi"!==o||!s.isFull())&&(i=s.render("item",s.options[t]),this.control.contains(i)&&(i=i.cloneNode(!0)),n=s.isFull(),s.items.splice(s.caretPos,0,t),s.insertAtCaret(i),(!s.isPending||!n&&s.isFull())&&s.refreshState(),s.isSetup))){var r=s.selectable();if(!s.isPending){var a=s.getOption(t),u=s.getAdjacent(a,1);s.refreshOptions(s.isFocused&&"single"!==o),u&&s.setActiveOption(u)}!r.length||s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",t,i),s.isPending||s.updateOriginalInput({silent:e})}}))},s.removeItem=function(t,e){var i,n,s=this.getItem(t);s&&(t=l(s.dataset.value),-1!==(i=this.items.indexOf(t))&&(s.remove(),s.classList.contains("active")&&(n=this.activeItems.indexOf(s),this.activeItems.splice(n,1),v(s,"active")),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(t)&&this.removeOption(t,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updateOriginalInput({silent:e}),this.positionDropdown(),this.trigger("item_remove",t,s)))},s.createItem=function(t,e){var i,n=this,s=n.caretPos;t=t||n.inputValue();var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof e&&(e=!0),!n.canCreate(t))return o(),!1;n.lock();var r=!1,a=function(t){if(n.unlock(),!t||"object"!=typeof t)return o();var i=l(t[n.settings.valueField]);if("string"!=typeof i)return o();n.setTextboxValue(""),n.addOption(t),n.setCaret(s),n.addItem(i),n.refreshOptions(e&&"single"!==n.settings.mode),o(t),r=!0};return"function"==typeof n.settings.create?i=n.settings.create.apply(this,[t,a]):((i={})[n.settings.labelField]=t,i[n.settings.valueField]=t),r||a(i),!0},s.refreshItems=function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},s.refreshState=function(){var t=this;t.refreshValidityState();var e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);var n,s=t.control.classList;s.toggle("focus",t.isFocused),s.toggle("disabled",t.isDisabled),s.toggle("required",t.isRequired),s.toggle("invalid",t.isInvalid),s.toggle("locked",i),s.toggle("full",e),s.toggle("not-full",!e),s.toggle("input-active",t.isFocused&&!t.isInputHidden),s.toggle("dropdown-active",t.isOpen),s.toggle("has-options",(n=t.options,0===Object.keys(n).length)),s.toggle("has-items",t.items.length>0)},s.refreshValidityState=function(){if(this.input.checkValidity){var t=!this.input.checkValidity();this.isInvalid=t,this.control_input.required=t,this.input.required=!t}},s.isFull=function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},s.updateOriginalInput=function(t){var e,i,n,s,o=this;if(t=t||{},o.is_select_tag){for(n=[],e=0,i=o.items.length;e<i;e++)s=o.options[o.items[e]][o.settings.labelField]||"",n.push('<option value="'+u(o.items[e])+'" selected="selected">'+u(s)+"</option>");n.length||this.input.hasAttribute("multiple")||n.push('<option value="" selected="selected"></option>'),o.input.innerHTML=n.join("")}else o.input.value=o.getValue(),o.input.setAttribute("value",o.input.value);o.isSetup&&(t.silent||o.trigger("change",o.input.value))},s.open=function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),g(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),g(t.dropdown,{visibility:"visible",display:"block"}),t.trigger("dropdown_open",t.dropdown))},s.close=function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.isBlurring||t.blur()),t.isOpen=!1,g(t.dropdown,{display:"none"}),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.dropdown)},s.positionDropdown=function(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX;g(this.dropdown,{width:e.width+"px",top:i+"px",left:n+"px"})}},s.clear=function(t){if(this.items.length){for(var e=this.controlChildren(),i=0;i<e.length;i++)e[i].remove();this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.trigger("clear")}},s.insertAtCaret=function(t){var e=Math.min(this.caretPos,this.items.length),i=this.buffer||this.control;0===e?i.insertBefore(t,i.firstChild):i.insertBefore(t,i.children[e]),this.setCaret(e+1)},s.deleteSelection=function(t){var e,i,n,s,o,r,a,l=this;if(n=t&&8===t.keyCode?-1:1,s={start:(a=l.control_input).selectionStart,length:a.selectionEnd-a.selectionStart},o=[],l.activeItems.length){for(r=b(O(l.activeItems,n)),n>0&&r++,e=0,i=l.activeItems.length;e<i;e++)o.push(l.activeItems[e].dataset.value);t&&(t.preventDefault(),t.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(n<0&&0===s.start&&0===s.length?o.push(l.items[l.caretPos-1]):n>0&&s.start===l.inputValue().length&&o.push(l.items[l.caretPos]));if(!o.length||"function"==typeof l.settings.onDelete&&!1===l.settings.onDelete.apply(l,[o,t]))return!1;for(void 0!==r&&l.setCaret(r);o.length;)l.removeItem(o.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!1),!0},s.advanceSelection=function(t,e){var i,n;if(0!==t)if(this.rtl&&(t*=-1),this.isKeyDown(17,e)||this.isKeyDown(16,e)){n=this.getLastActive(t);var s=this.getAdjacent(n,t,"item");s&&(s.classList.contains("active")&&this.removeActiveItem(n),this.setActiveItemClass(s))}else this.isFocused&&!this.isInputHidden?this.inputValue().length||this.setCaret(this.caretPos+t):(n=this.getLastActive(t))&&(i=b(n),this.setCaret(t>0?i+1:i),this.setActiveItem(null))},s.getLastActive=function(t){var e=this.control.querySelector(".last-active");return e||function(t,e,i){var n=t.querySelectorAll(e);if(n)return O(n,i)}(this.control,".active",t)},s.setCaret=function(t){var e=this;if(t="single"===e.settings.mode||e.settings.controlInput?e.items.length:Math.max(0,Math.min(e.items.length,t)),!e.settings.controlInput&&!e.isPending){var i,n,s=this.controlChildren(),o=s.length;for(i=0;i<o;i++)n=s[i],i<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)}e.caretPos=t},s.controlChildren=function(){return Array.prototype.filter.call(this.control.children,(function(t){return"INPUT"!==t.nodeName}))},s.lock=function(){this.close(),this.isLocked=!0,this.refreshState()},s.unlock=function(){this.isLocked=!1,this.refreshState()},s.disable=function(){this.input.disabled=!0,this.control_input.disabled=!0,this.control_input.tabIndex=-1,this.isDisabled=!0,this.lock()},s.enable=function(){this.input.disabled=!1,this.control_input.disabled=!1,this.control_input.tabIndex=this.tabIndex,this.isDisabled=!1,this.unlock()},s.destroy=function(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML="",t.tabindex?this.input.setAttribute("tabindex",t.tabindex):this.input.removeAttribute("tabindex"),v(this.input,"tomselected"),this.input.removeAttribute("hidden");for(var e=0;e<t.children.length;e++)this.input.appendChild(t.children[e]);this._destroy(),delete this.input.tomselect},s.render=function(t,e){var i,n,s="",o=this;return"option"!==t&&"item"!==t||(i=l(e[o.settings.valueField]),!o.renderCache[t].hasOwnProperty(i))?(s=d(o.settings.render[t].apply(this,[e,u])),"option"===t||"option_create"===t?e[o.settings.disabledField]||s.setAttribute("data-selectable",""):"optgroup"===t&&(n=e.group[o.settings.optgroupValueField],s.setAttribute("data-group",n),e.group[o.settings.disabledField]&&s.setAttribute("data-disabled","")),"option"!==t&&"item"!==t||(s.setAttribute("data-value",i),f(s,"item"===t?o.settings.itemClass:o.settings.optionClass),o.renderCache[t][i]=s),s):o.renderCache[t][i]},s.clearCache=function(t){void 0===t?this.renderCache={item:{},option:{}}:this.renderCache[t]={}},s.canCreate=function(t){if(!this.settings.create)return!1;var e=this.settings.createFilter;return t.length&&("function"!=typeof e||e.call(this,t))&&(!(e instanceof RegExp)||e.test(t))},s.isKeyDown=function(t,e){return!!e&&(!e.altKey&&((!e.ctrlKey||!e.shiftKey)&&(!(17!=t||!e.ctrlKey)||!(16!=t||!e.shiftKey))))},s.hook=function(t,e,i){var n=this,s=n[e];n[e]=function(){var e,o;return"after"===t&&(e=s.apply(n,arguments)),o=i.apply(n,arguments),"instead"===t?o:("before"===t&&(e=s.apply(n,arguments)),e)}},n}(t);return(C=A).plugins={},C.prototype.initializePlugins=function(t){var e,i,n,s=this,o=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},Array.isArray(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?o.push(t[e]):(s.plugins.settings[t[e].name]=t[e].options,o.push(t[e].name));else if(t)for(n in t)t.hasOwnProperty(n)&&(s.plugins.settings[n]=t[n],o.push(n));for(;o.length;)s.require(o.shift())},C.prototype.loadPlugin=function(t){var e=this,i=e.plugins,n=C.plugins[t];if(!C.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=n.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)},C.prototype.require=function(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]},C.define=function(t,e){C.plugins[t]={name:t,fn:e}},A.define("change_listener",(function(t){var e=this,i=!1;e.input.addEventListener("change",(function(){if(i)i=!1;else{i=!0;var t=p(e.input,{});e.setupOptions(t.options,t.optgroups),e.setValue(t.items)}}))})),A.define("drag_drop",(function(t){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e=this,i=e.lock,n=e.unlock;e.hook("instead","lock",(function(){var t=e.control.dataset.sortable;return t&&t.disable(),i.apply(e,arguments)})),e.hook("instead","unlock",(function(){var t=e.control.dataset.sortable;return t&&t.enable(),n.apply(e,arguments)})),e.hook("after","setup",(function(){var t=$(e.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:function(e,i){i.placeholder.css("width",i.helper.css("width")),t.css({overflow:"visible"})},stop:function(){t.css({overflow:"hidden"});var i=[];t.children("[data-value]").each((function(){i.push($(this).attr("data-value"))})),e.setValue(i)}})}))}})),A.define("dropdown_header",(function(t){var e=this;t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},t),e.hook("after","setup",(function(){var i=d(t.html(t));e.dropdown.insertBefore(i,e.dropdown.firstChild)}))})),A.define("input_autogrow",(function(t){var e=this;e.hook("after","setup",(function(){var t=document.createElement("span"),i=this.control_input;t.style.position="absolute",t.style.top="-99999px",t.style.left="-99999px",t.style.width="auto",t.style.padding=0,t.style.whiteSpace="pre",e.wrapper.appendChild(t);for(var n=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"],s=0,o=n.length;s<o;s++){var r=n[s];t.style[r]=i.style[r]}var a=function(){t.textContent=i.value,i.style.width=t.clientWidth+"px"};i.addEventListener("input",a),i.addEventListener("keyup",a),i.addEventListener("blur",a),i.addEventListener("update",a)}))})),A.define("no_backspace_delete",(function(t){this.hook("instead","setActiveItem",(function(){})),this.hook("instead","selectAll",(function(){})),this.hook("instead","deleteSelection",(function(){}))})),A.define("optgroup_columns",(function(t){var e=this,i=e.onKeyDown;e.hook("instead","onKeyDown",(function(t){var n,s,o,r;if(!e.isOpen||37!==t.keyCode&&39!==t.keyCode)return i.apply(e,arguments);e.ignoreHover=!0,r=w(e.activeOption,"[data-group]"),n=b(e.activeOption,"[data-selectable]"),(r=37===t.keyCode?r.previousSibling:r.nextSibling)&&(s=(o=r.querySelectorAll("[data-selectable]"))[Math.min(o.length-1,n)])&&e.setActiveOption(s)}))})),A.define("remove_button",(function(t){t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+u(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",(function(){var t=e.settings.render.item;e.settings.render.item=function(){var n=d(t.apply(e,arguments)),s=d(i);return n.appendChild(s),s.addEventListener("mousedown",(function(t){t.preventDefault(),t.stopPropagation()})),s.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),"single"!==e.settings.mode&&t.stopPropagation(),!e.isLocked){var i=n.dataset.value;e.removeItem(i),e.refreshOptions(!1)}})),n}}))}})),A.define("restore_on_backspace",(function(t){var e=this;t.text=t.text||function(t){return t[e.settings.labelField]};var i=e.onKeyDown;e.hook("instead","onKeyDown",(function(n){var s,o;return 8===n.keyCode&&""===e.control_input.value&&!e.activeItems.length&&(s=e.caretPos-1)>=0&&s<e.items.length?(o=e.options[e.items[s]],e.deleteSelection(n)&&(e.setTextboxValue(t.text.call(e,o)),e.refreshOptions(!0)),void n.preventDefault()):i.apply(e,arguments)}))})),A}));var tomSelect=function(t,e){return new TomSelect(t,e)};
//# sourceMappingURL=tom-select.complete.min.js.map
